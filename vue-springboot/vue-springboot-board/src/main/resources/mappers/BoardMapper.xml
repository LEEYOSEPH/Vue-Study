<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.vue.springboot.mapper.BoardMapper">

	<resultMap id="resultBoard" type="com.vue.springboot.domain.BoardDTO" >
		<result property="board_no" column="board_no" />
		<result property="board_title" column="board_title" />
		<result property="board_content" column="board_content" />
		<result property="board_createDt" column="board_createDt" />
		<result property="board_updateDt" column="board_updateDt" />
		<result property="board_cnt" column="board_cnt" />
		<result property="user_no" column="user_no" />
		<result property="board_image" column="board_image" />
		<result property="likes_cnt" column="likes_cnt" />
	</resultMap>
	
	<insert id="insertBoard">
		INSERT INTO BOARD VALUES (
			board_no
			,#{board_title}
			, #{board_content}
			, now()
			, now()
			, 0
			,#{user_no}
			,#{board_image}
			,#{likes_cnt}
		)
	</insert>
	
	<select id="getBoardList" resultMap="resultBoard">
		SELECT *
		FROM BOARD
		ORDER BY board_updateDt DESC
	</select>
	
	<select id="getBoardDetail" resultMap="resultBoard">
		SELECT *
		FROM BOARD
		WHERE board_no = #{board_no}
	</select>
	
	<select id="getMyBoard" resultMap="resultBoard">
		SELECT *
		FROM BOARD
		WHERE user_no = #{user_no}
		ORDER BY board_updateDt DESC
	</select>
	
	<delete id="deleteBoard">
		DELETE 
		FROM BOARD
		WHERE board_no = #{board_no}
		AND user_no = #{user_no}
	</delete>
	
	<select id="getModifyBoard" resultMap="resultBoard">
		SELECT *
		FROM BOARD
		WHERE board_no = #{board_no}
		AND user_no = #{user_no}
	</select>
	
	<update id="editBoard">
		UPDATE BOARD
		SET
			board_title = #{board_title}
			, board_content = #{board_content}
			, board_updateDt = now()
		WHERE board_no = #{board_no}
		AND user_no = #{user_no}
	</update>
	
	<update id="updateBoardCnt">
		UPDATE BOARD
		SET
			board_cnt = board_cnt+1
		WHERE board_no = #{board_no}
	</update>
	
	<select id="getMostViewedBoard" resultMap="resultBoard">
		SELECT *
		FROM BOARD
		ORDER BY board_cnt DESC
	</select>
	
</mapper>